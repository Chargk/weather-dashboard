<div class="dashboard-container fade-in">
    <!-- Loading State -->
    <div *ngIf="isLoading()" class="loading-container">
      <mat-spinner diameter="60"></mat-spinner>
      <p>Loading weather data...</p>
    </div>
  
    <!-- Weather Content -->
    <div *ngIf="!isLoading() && currentWeather()" class="weather-content">
      <!-- Current Weather Card -->
      <mat-card class="current-weather-card">
        <mat-card-header>
          <div mat-card-avatar class="weather-avatar">
            <mat-icon class="weather-icon">{{ currentWeather()!.icon }}</mat-icon>
          </div>
          <mat-card-title class="location-title">
            {{ currentWeather()!.city }}{{ currentWeather()!.country ? ', ' + currentWeather()!.country : '' }}
          </mat-card-title>
          <mat-card-subtitle class="weather-description">
            {{ currentWeather()!.description | titlecase }}
          </mat-card-subtitle>
        </mat-card-header>
        
        <mat-card-content class="weather-main">
          <div class="temperature-section">
            <div class="main-temperature" 
                 [style.color]="getTemperatureColor(currentWeather()!.temperature)">
              {{ currentWeather()!.temperature }}째
            </div>
            <div class="feels-like">
              Feels like {{ currentWeather()!.feelsLike }}째
            </div>
          </div>
          
          <div class="weather-details">
            <div class="detail-item">
              <mat-icon>opacity</mat-icon>
              <span>{{ currentWeather()!.humidity }}%</span>
              <small>Humidity</small>
            </div>
            
            <div class="detail-item">
              <mat-icon>speed</mat-icon>
              <span>{{ currentWeather()!.pressure }} hPa</span>
              <small>Pressure</small>
            </div>
            
            <div class="detail-item">
              <mat-icon [matTooltip]="'Wind direction: ' + currentWeather()!.windDirection">
                {{ getWindDirectionIcon(currentWeather()!.windDirection) }}
              </mat-icon>
              <span>{{ currentWeather()!.windSpeed }} km/h</span>
              <small>Wind Speed</small>
            </div>
            
            <div class="detail-item">
              <mat-icon>visibility</mat-icon>
              <span>{{ currentWeather()!.visibility }} km</span>
              <small>Visibility</small>
            </div>
          </div>
        </mat-card-content>
        
        <mat-card-actions>
          <button mat-button color="primary" (click)="refreshWeather()">
            <mat-icon>refresh</mat-icon>
            Refresh
          </button>
          <button mat-button color="accent" (click)="addToFavorites()">
            <mat-icon>favorite_border</mat-icon>
            Add to Favorites
          </button>
          <button mat-button (click)="shareWeather()">
            <mat-icon>share</mat-icon>
            Share
          </button>
        </mat-card-actions>
      </mat-card>
  
      <!-- Additional Info Cards -->
      <div class="info-cards">
        <mat-card class="info-card">
          <mat-card-header>
            <mat-card-title>
              <mat-icon>wb_sunny</mat-icon>
              Sun & Moon
            </mat-card-title>
          </mat-card-header>
          <mat-card-content>
            <div class="sun-moon-info">
              <div class="sun-info">
                <mat-icon>wb_sunny</mat-icon>
                <div>
                  <div class="time">{{ currentWeather()!.sunrise }}</div>
                  <small>Sunrise</small>
                </div>
              </div>
              <div class="moon-info">
                <mat-icon>nightlight_round</mat-icon>
                <div>
                  <div class="time">{{ currentWeather()!.sunset }}</div>
                  <small>Sunset</small>
                </div>
              </div>
            </div>
          </mat-card-content>
        </mat-card>
  
        <mat-card class="info-card">
          <mat-card-header>
            <mat-card-title>
              <mat-icon>security</mat-icon>
              UV Index
            </mat-card-title>
          </mat-card-header>
          <mat-card-content>
            <div class="uv-index">
              <div class="uv-value" [class]="'uv-' + currentWeather()!.uvIndex">
                {{ currentWeather()!.uvIndex || 'N/A' }}
              </div>
              <div class="uv-description">
                {{ currentWeather()!.uvIndex < 3 ? 'Low' : 
                   currentWeather()!.uvIndex < 6 ? 'Moderate' : 
                   currentWeather()!.uvIndex < 8 ? 'High' : 'Very High' }}
              </div>
            </div>
          </mat-card-content>
        </mat-card>
      </div>
  
      <!-- 5-Day Forecast -->
      <mat-card class="forecast-card">
        <mat-card-header>
          <mat-card-title>
            <mat-icon>calendar_today</mat-icon>
            5-Day Forecast
          </mat-card-title>
        </mat-card-header>
        <mat-card-content>
          <div class="forecast-list">
            <div *ngFor="let day of forecast()" class="forecast-item">
              <div class="forecast-day">{{ day.day }}</div>
              <mat-icon class="forecast-icon">{{ day.icon }}</mat-icon>
              <div class="forecast-temps">
                <span class="high-temp">{{ day.high }}째</span>
                <span class="low-temp">{{ day.low }}째</span>
              </div>
              <div class="forecast-desc">{{ day.description | titlecase }}</div>
            </div>
          </div>
        </mat-card-content>
      </mat-card>
    </div>
  </div>